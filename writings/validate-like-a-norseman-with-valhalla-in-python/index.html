<!DOCTYPE html>

<html><head><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><link href="/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57" /><link href="/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60" /><link href="/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" /><link href="/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" /><link href="/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114" /><link href="/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" /><link href="/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144" /><link href="/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" /><link href="/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" /><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" /><link href="/android-chrome-192x192.png" rel="icon" sizes="192x192" type="image/png" /><link href="/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png" /><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" /><link href="manifest.json" rel="manifest" /><link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon" /><meta content="#da532c" name="msapplication-TileColor" /><meta content="/mstile-144x144.png" name="msapplication-TileImage" /><meta content="#ffffff" name="theme-color" /><link href="/bundles/5121017450b7/all.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Lato:400,300,400italic,700,900" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Quicksand:400,700" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700italic,700,600italic,600,400italic,300italic,300" rel="stylesheet" type="text/css" /><script src="/bundles/d4116d62ed00/all.min.js"></script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-22539794-3","auto"),ga("send","pageview");</script><title>Peter M. Elias - Full Stack Developer</title></head><body><section class="l-header"><article class="header-mini"><article class="header-mini__content"><a href="/"></a><h6 class="header-mini__title">P<span class="header-mini__red">M</span>E</h6><h5 class="header-mini__current-page">writing</h5></article></article></section><section class="l-main" id="main"><section class="l-navigation"><article class="navlist" id="navlist"><article class="spin-button" id="navlist-expand"><span class="spin-button__icon"></span></article><ul class="navlist__list" id="navlist-list"><li class="navlist__item  "><a href="/portfolio">portfolio</a></li><li class="navlist__item  active"><a href="/writings">writings</a></li><li class="navlist__item  "><a href="/hire-me">hiring me</a></li><li class="navlist__item  "><a href="/about">about me</a></li><li class="navlist__item  "><a href="https://www.github.com/petermelias" target="_blank">github</a></li></ul></article></section><section class="l-page"><section class="writing"><h5>Using the Valhalla Validation Library</h5><p>Spoiler alert: I wrote <a href="//www.github.com/petermelias/valhalla" target="_blank">this library</a></p><p>I am finally getting around to promoting it because I really think it beats most Python validation libraries by about a mile in terms of API.</p><p>Let's see if I can convince you.</p><p>Here's the object-method of creating and using a schema:</p>
<pre><code class="codehilite"><span class="n">s</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">email_address</span><span class="o">.</span><span class="n">email</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">first_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

<span class="n">s</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span>
    <span class="s">'email_address'</span><span class="p">:</span> <span class="s">'not an email'</span><span class="p">,</span>
    <span class="s">'first_name'</span><span class="p">:</span> <span class="s">'Tony Almaeda'</span>
<span class="p">})</span>

<span class="k">print</span> <span class="n">s</span><span class="o">.</span><span class="n">valid</span> <span class="c"># False</span>
</code></pre><p>Okay, I don't know about you but I can't think of a faster or shorter way to describe a validation structure in Python.</p><p>The FormEncode library is super verbose, and deals with Form building... This is all about just validating data structures regardless of their source.</p><p>This is a fully feature validation library. It comes with 40+ validators, adding new ones is super easy.</p><p>I was holding out on you. There IS even a shorter way to define a schema if you like LISP or just being an arcane person in general.</p>
<pre><code class="codehilite"><span class="n">s_def</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'email_address'</span><span class="p">:</span> <span class="p">[</span><span class="s">'require'</span><span class="p">,</span> <span class="p">(</span><span class="s">'email_address'</span><span class="p">)],</span>
  <span class="s">'first_name'</span><span class="p">:</span> <span class="p">[</span><span class="s">'require'</span><span class="p">,</span> <span class="p">(</span><span class="s">'text'</span><span class="p">)]</span>
<span class="p">}</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">Schema</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">s_def</span><span class="p">)</span> <span class="c"># same as object based schema above</span>
</code></pre><p>Yeah. I basically stole LISP syntax to make it as brief as possible to define the structure of a given validator.</p><p>Why did I do this? Why not just use FormEncode or Voluptuous?</p><p>Well, FormEncode makes my eyes bleed and Voluptuous is cool but was still too verbose for my taste.</p><p>Valhalla essentially provides all of the same features but just packed into a nicer API.</p><p>I'll write an advanced write-up later on how to do things like collection membership testing, related-fields validation and custom validators and parameters.</p></section></section></section><section class="l-footer"><footer><section class="footer-content"><p class="footer__text">copyright peter m elias 2003 - 2016</p></section></footer></section><button class="js-intercom-cta hidden"></button><script src="/javascript/intercom.js" type="text/javascript"></script></body></html>